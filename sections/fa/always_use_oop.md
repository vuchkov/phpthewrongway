# همیشه از برنامه‌نویسی شی-گرا استفاده کنید #

> مشکل زبان‌های شی-گرا این است که همه آن‌ها یک محیط کامل را با خود حمل می‌کنند. شما یک موز می‌خواستید ولی چیزی که نصیبتان شد گوریلی به همراه موز بود که داخل یک جنگل قرار داشت.
>
> -- جو آرمسترانگ در [کدنویس‌ها در کار - نقطه نظراتی در هنر برنامه‌نویسی](http://codersatwork.com/)

> انتزاع قدرتمند است. چیزی که من به آن حساسیت دارم، و چیزی که نسبت به آن واکنش نشان دادم این مزخرفات دهه ۹۰ درباره CORBA، COM و DCOM بود. هر استارت‌آپی در آن زمان برای اینکه یک "Hello World" ساده چاپ کند از ۲۰۰ هزار فراخوانی متد استفاده می‌کرد. این کار مسخره است! شما نمی‌خواهید برنامه‌نویسی باشید که با این چیزا سر و کار داشته باشه.
>
> -- برندن آیک در [کدنویس‌ها در کار - نقطه نظراتی در هنر برنامه‌نویسی](http://codersatwork.com/)

بسیاری از توسعه‌دهندگان نرم‌افزار و شرکت‌های نرم‌افزاری، تصور می‌کنند که برنامه‌نویسی شی-گرا تنها راه معقول برای توسعه نرم‌افزار در این روزها است. هر کسی که درباره برنامه‌نویسی شی-گرا مخالفتی انجام دهد بلافاصله با این واکنش رو‌به‌رو می‌گردد که مقابل "خرد جمعی" این صنعت قرار گرفته است.

در وبلاگ‌ها و انجمن‌های برنامه‌نویسی، بسیاری افراد وقت خود را صرف دفاع از برنامه‌نویسی شی-گرا کرده، افرادی که با قاطعیت در این زمینه اظهار نظر می‌‌کنند، بدون اینکه از هیچ روش استاندارد در این زمینه بهره بگیرند!

واقعیت این است که برنامه‌نویسی شی-گرا به این شکل تنها پیچیدگی ناخواسته‌ای را با خود همراه می‌آورد.

به عنوان برنامه‌نویسان و محققان رایانه ما باید بیاموزیم که تعصب را کنار گذاشته و بهترین راه حل موجود را برای یک مساله انتخاب کنیم.

امروزه، یکی از نقاط قوت PHP پشتیبانی از سبک‌های برنامه‌نویسی دستوری، تابعی، شی-گرا، رویه‌ای و انعکاسی است. PHP یک جعبه ابزار بزرگ با ابزارهای بسیار متنوع است که امکان حل بسیاری مسائل را به شیوه‌های گوناگون به وجود می‌آورد - **نه تنها یک شیوه!**

** به محض اینکه مسائل مختلف در یک برنامه را تنها محدود به یک سبک از برنامه‌نویسی کنیم، قابلیت تفکر خلاقانه را از خود صلب کرده و عملکرد بهینه‌ای نخواهیم داشت!**

## یک درس تاریخی کوچک ##

یکی از بهترین راه‌های درک یک سبک برنامه‌نویسی این است که به تکامل آن توجه کنیم. عامل توسعه آن چه بوده است؟ چه مشکلاتی با سایر سبک‌های برنامه‌نویسی وجود داشت که نیاز به شیوه‌ای جدید احساس می‌شد؟ یک مشکل در جهان واقعی بود یا تنها در محیط دانشگاهی خلاصه می‌شد؟ و اینکه چگونه تکامل یافته است؟

مهم نیست که شخص X چه می‌گوید یا شخص Y چه تعریفی ارائه می‌دهد، چیزی که اهمیت دارد محیطی است که سیک‌های مختلف طی زمان در آن بوجود آمده‌اند.

> دو راه برای ایجاد یک طراحی نرم‌افزار وجود دارد. یک راه این است که به قدری ساده باشد که آشکارا هیچ کمبودی نباشد و راه دیگر این است که به قدری پیچیده باشد که هیچ کمبودی آشکار نباشد.
>
> -- [چارلز آنتونی ریچاردز هور](https://en.wikiquote.org/wiki/C._A._R._Hoare)

در گذشته، قبل از ظهور برنامه‌نویسی شی-گرا، تقریبا اواخر دهه ۱۹۵۰، نرم‌افزار با استفاده از زبان‌های برنامه‌نویسی توسعه می‌یافت که ساخت‌یافته نبودند، که گاهی اوقات به زبان‌های نسل اول و دوم نامیده می‌شوند. برنامه‌نویسی بدون ساختار (یا ساختار نیافته) به لحاظ تاریخی قدیمی‌ترین سبک برنامه‌نویسی است. از این سبک به شدت برای تولید کد "اسپاگتی" انتقاد می‌شد.

برای این سبک برنامه‌نویسی زبان‌های سطح بالا و پایین وجود داشتند. این زبان‌ها شامل نسخه‌های اولیه TELECOMP، FOCAL، JOSS، MUMPS، COBOL، Basic، کد سطح ماشین، سیستم‌های اولیه اسمبلر (آن‌هایی که شامل عملگرهای رویه‌ای متا نبودند) و برخی زبان‌های اسکریپتی می‌شوند.

برنامه‌ای در زبان بدون ساختار معمولا شامل دستورات یا عبارت‌های ترتیبی و پشت سر هم است. خطوط معمولا دارای شماره یا برچسب هستند که امکان تغییر جریان برنامه‌ را به قسمتی دیگر ممکن می‌سازد (مانند عبارت فراموش شده GOTO).

سپس، در دهه ۱۹۶۰ برنامه‌نویسی ساخت‌یافته ظهور یافت - اغلب به دلیل نامه مشهور ادگار دایجسترا [عبارت‌های Go To مضر هستند](http://www.u.arizona.edu/~rubinson/copyright_violations/Go_To_Considered_Harmful.html)

برنامه‌نویسی ساخت‌یافته سبکی از برنامه‌نویسی است که با استفاده از ساب‌روتین‌ها، ساختارهای بلاک و حلقه‌ها به وضوح، کیفیت و توسعه نرم‌افزار کمک می‌کند. این سبک در مقابل استفاده از عبارت GOTO برای پرش به قسمت‌های دیگر برنامه قرار می‌گیرد.

بعدها، برنامه‌نویسی رویه‌ای از برنامه‌نویسی ساخت‌یافته مشتق شد. برنامه‌نویسی رویه‌ای مبتنی بر مفهوم "فراخوانی رویه" است. یک "فراخوانی رویه" نام دیگری برای "فراخوانی تابع" است. رویه‌ها همچنین به نام‌های روتین، ساب‌روتین یا متد شناخته می‌شوند. یک رویه تنها شامل برخی دستورات محاسباتی است که باید فراخوانی شوند. هر رویه می‌تواند در هر نقطه از برنامه هنگام اجرای آن توسط خود یا سایر رویه‌ها فراخوانی شود.

در ابتدا تمام رویه‌ها به عنوان داده سراسری در هر قسمت از برنامه قابل دسترس بودند. در برنامه‌های کوچک این مشکل حادی نبود، اما با پیچیده‌تر شدن برنامه و افزایش حجم آن، یک تغییر کوچک در یک قسمت از برنامه روی سایر قسمت‌ها نیز تاثیرگذار بود.

هیچکس قصد ایجاد تغییر در برنامه‌ای با وابستگی‌های گوناگون را نداشت. یک تغییر کوچک در یک رویه منجر به بروز سلسله‌ای از خطا در سایر رویه‌های مبتنی بر کد اصلی بودند.

تکنیک جدیدی تکامل یافت که اجازه می‌داد داده به حوزه‌های کوچک‌تری بنام "اشیا" تقسیم شود. تنها رویه‌های خاصی که به آن حوزه اختصاص داشتند می‌توانستند به آن داده دسترسی داشته باشند. به این عمل پنهان‌سازی داده یا encapsulation گفته می‌شود. نتیجه این عمل شامل کد بهتر و مرتب‌تری می‌شد.

در ابتدا از اشیا به این نام یاد نمی‌شد، چرا که تنها به عنوان حوزه‌های جدا از هم دیده می‌شدند. بعدها که وابستگی‌ها کاهش یافتند و ارتباط بین رویه‌ها و متغیرهای یک حوزه به عنوان قسمت‌های مجزا در نظر گرفته شد، مفهوم "شی" و "برنامه‌نویسی شی-گرا" بوجود آمد.

بعدها، اغلب به دلیل توسعه جاوا، برخی "اصطلاحات" بوجود آمدند و یک "رویه" یا "تابع" دیگر با این نام صدا زده نمی‌شدند، از آنجا که در حوزه جداگانه‌ای قرار داشت، "متد" نام گرفت. "متغیرها" نیز دیگر با این نام صدا زده نمی‌شدند بلکه هنگام قرارگیری در یک حوزه جداگانه نام "ویژگی" به خود گرفتند.

بنابراین یک شی در اصل مجموعه‌ای از متغیرها و توابع است که اکنون "ویژگی و متد" نامیده می‌شود.

شیوه‌ای که ویژگی‌ها و متدها درون یک حوزه جداگانه قرار می‌گیرند تعریف یک "کلاس" است. زمانی که این کلاس مقداردهی اولیه شود، یک شی نامیده می‌شود.

اشیا می‌توانند به یکدیگر ارجاع داده شوند و با چنین ارجاعی، متدها (توابع) درونی می‌توانند با یکدیگر "ارتباط برقرار" کنند. اشیا همچنین می‌توانند متدهای سایر اشیا را "به ارث" ببرند که به این عمل "وراثت" گفته می‌شود. این راهی برای استفاده مجدد از کد و امکان ایجاد افزونه‌های مجزا از نرم‌افزار با استفاده از کلاس‌ها و رابط‌های عمومی است. روابط اشیا به یک سلسله‌مراتب جدید ختم شد. مفهوم وراثت در سال ۱۹۶۷ برای زبان برنامه‌نویسی [Simula 67](http://en.wikipedia.org/wiki/Simula) ابداع شد.

اشیا همچنین می‌توانند متدهای سایر اشیا را به ارث برده و عملکرد اصلی آن را "بازنویسی" کنند که به این مفهوم "چندریختی" گفته می‌شود.

اینکه چگونه این ایده‌های مختلف پیاده‌سازی می‌شوند از یک زبان برنامه‌نویسی به دیگری متفاوت است.

برنامه‌نویسی شی-گرا درباره سازمان‌دهی کد نسبت به سبک‌های قبل از خود است. یک افزونه برای برنامه‌نویسی رویه‌ای به حساب می‌آید و درباره پنهان‌سازی داده (encapsulation) و جلوگیری از حوزه سراسری است. درباره توسعه توابع با "قرض‌گرفتن" ساختار آن‌ها و تغییر عملکرد بدون تاثیر روی کد اصلی است (inheritance). همچنین درباره بازنویسی توابع بدون تغییر در کد اصلی است (polymophism).

> مدل شی-گرا به تولید سریع برنامه‌ها کمک می‌کند. چیزی که در عمل اتفاق می‌افتد این است که روشی ساخت‌یافته برای تولید کد اسپاگتی فراهم می‌کند.
>
> -- پل گراهام در [Ansi Common Lisp](https://openlibrary.org/works/OL7944696W/ANSI_Common_Lisp)

**مسیر اشتباه**: همیشه از برنامه‌نویسی شی-گرا استفاده کنید. ![Thumbs down](../img/thumbs-down-rtl.png)
